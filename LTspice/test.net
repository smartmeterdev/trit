* window comparator + MOSFET pass
Vplus Vcc 0 DC 5
Vminus Vee 0 DC -5
VA A 0 DC 1         ; testar +1V
VB B 0 DC 1         ; testar +1V  (mude para -1 para outros testes)
VSIG SINALIN 0 SIN(0 0.5 1k) ; exemplo de seno 0.5V

* Differential amplifier (ideal)
E1 D 0 A B 1        ; E-source: V(D) = V(A)-V(B)  (ideal diff amp)

* comparators (idealized)
* Comparator1: D > +Vth
Vrefh REFH 0 DC 0.1
Ecmp1 OUT1 0 D REFH 100k

* Comparator2: D < -Vth  (invert sign)
Vrefl REFL 0 DC -0.1
Ecmp2 OUT2 0 REFL D 100k

* Simple OR via diodes to NODE_OR (idealization)
D1 NODE_OR OUT1 DiodeModel
D2 NODE_OR OUT2 DiodeModel
Rpu NODE_OR Vcc 47k

* Inverter (ENABLE = NOT NODE_OR)
EINV ENABLE 0 NODE_OR 0 -1   ; inverte o nÃ­vel (idealized)
Rg ENABLE GATE 100
Rgpd GATE 0 100k

* MOSFET switch (ideal)
M1 OUT  SINALIN GATE 0 NMOS_MODEL
Rload OUT 0 10k

.model DiodeModel D(Is=1e-9)
.model NMOS_MODEL NMOS (VTO=2 KP=100u)

.tran 0 10m
.end
